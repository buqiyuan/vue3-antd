(window.webpackJsonp=window.webpackJsonp||[]).push([["system-role"],{"0f1b":function(e,t,n){"use strict";var r=n("7a23"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},a=n("b3f0");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,t.attrs);return r.createVNode(a.a,r.mergeProps(n,{icon:c}),null)};i.displayName="MinusSquareOutlined",i.inheritAttrs=!1,t.a=i},1557:function(e,t,n){},"1a7f":function(e,t,n){"use strict";var r=n("7a23"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},a=n("b3f0");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,t.attrs);return r.createVNode(a.a,r.mergeProps(n,{icon:c}),null)};i.displayName="FileOutlined",i.inheritAttrs=!1,t.a=i},"2a24":function(e,t,n){"use strict";var r=n("7a23"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},a=n("b3f0");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,t.attrs);return r.createVNode(a.a,r.mergeProps(n,{icon:c}),null)};i.displayName="FolderOpenOutlined",i.inheritAttrs=!1,t.a=i},5633:function(e,t,n){"use strict";var r=n("7a23"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},a=n("b3f0");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,t.attrs);return r.createVNode(a.a,r.mergeProps(n,{icon:c}),null)};i.displayName="FolderOutlined",i.inheritAttrs=!1,t.a=i},6686:function(e,t,n){"use strict";n("1557")},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");var r=n("06c5");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var c=0,a=function(){};return{s:a,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}},bb44:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c=Object(r.createTextVNode)(" 添加 "),a=Object(r.createTextVNode)(" 打印表格 "),o=Object(r.createTextVNode)(" 删除 "),i=n("5530"),u=n("1da1"),s=(n("cd17"),n("ed3b")),l=(n("96cf"),n("d3b7"),n("25f0"),n("a4d3"),n("e01a"),n("3c7f")),d=n("1016"),f=n("cff2"),b=n("48b8"),p=n("76b3");n("d81d");var m,v=n("2909"),h=n("ade3"),O=(n("7f6b"),n("8592")),y=(n("c119"),n("d865")),j=(n("b0c0"),n("4de4"),n("99af"),n("6062"),n("3ca3"),n("ddb0"),n("caad"),n("2532"),Object(r.defineComponent)({name:"AccessTree",components:(m={},Object(h.a)(m,y.a.name,y.a),Object(h.a)(m,O.a.name,O.a),m),props:{value:{type:Array,default:function(){return[]}}},emits:["update:value"],setup:function(e,t){var n=t.emit,c=Object(r.reactive)({treeData:[],spinning:!1,replaceFields:{key:"id"}}),a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t.filter((function(e){return e.moduleId==n})).map((function(n){return Object(i.a)(Object(i.a)({},n),{},{title:n.moduleName||n.actionName,children:e(t,n.id)})}))},o=Object(r.computed)({get:function(){return e.value},set:function(e){return n("update:value",Array.isArray(e)?e:e.checked)}});Object(r.onMounted)(Object(u.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.spinning=!0,e.next=3,Object(f.c)().finally((function(){return c.spinning=!1}));case 3:t=e.sent,c.treeData=a(t);case 5:case"end":return e.stop()}}),e)}))));var s=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(null==t?void 0:t.children.length)>0?t.children.reduce((function(t,n){return n.children.length>0&&t.push.apply(t,Object(v.a)(e(n,t)).concat([[]])),t.concat([n.id])}),n):n};return Object(i.a)(Object(i.a)({},Object(r.toRefs)(c)),{},{checkedKeys:o,onCheck:function(e,t){var n=t.node,r=t.checked,c=o.value;if(r)c=Object(v.a)(new Set([].concat(Object(v.a)(o.value),Object(v.a)(e.checked),Object(v.a)(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.eventKey?(n.push(t.eventKey),e(t.vcTreeNode,n)):n}(n.vcTreeNode)),Object(v.a)(s(n.dataRef)))));else{var a,i,u,l=s(n.dataRef);c=l.length>0?e.checked.filter((function(e){return!l.includes(e)})):e.checked,((null===(a=n.vcTreeNode)||void 0===a||null===(i=a.dataRef)||void 0===i||null===(u=i.children)||void 0===u?void 0:u.map((function(e){return e.id})))||[]).some((function(e){return c.includes(e)}))||(c=c.filter((function(e){var t;return e!=(null===(t=n.vcTreeNode)||void 0===t?void 0:t.eventKey)})))}o.value=c}})}}));j.render=function(e,t,n,c,a,o){var i=Object(r.resolveComponent)("a-tree"),u=Object(r.resolveComponent)("a-spin");return Object(r.openBlock)(),Object(r.createBlock)(u,{spinning:e.spinning},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(i,{checkedKeys:e.checkedKeys,"onUpdate:checkedKeys":t[1]||(t[1]=function(t){return e.checkedKeys=t}),style:{"min-height":"40px"},checkable:"",checkStrictly:"",selectable:!1,"tree-data":e.treeData,"replace-fields":e.replaceFields,onCheck:e.onCheck},null,8,["checkedKeys","tree-data","replace-fields","onCheck"])]})),_:1},8,["spinning"])};var g,w=j,k=function(){return{style:{width:"auto"},formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},formItem:[{type:"input",label:"角色名称",field:"title",value:"",props:{placeholder:"请输入角色名称"},rules:[{required:!0,message:"角色名称不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"角色描述"}},{type:Object(r.createVNode)(w),label:"资源",field:"accessIdsList",value:[],asyncValue:(e=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r,c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==n?void 0:n.props.fields,c=r.id,e.next=3,Object(f.c)(c);case 3:return a=e.sent,e.abrupt("return",a.map((function(e){return e.accessId})));case 5:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}]};var e},x=[{title:"角色名称",dataIndex:"title"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"createdAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:function(e){return Object(b.b)(e)}},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:function(e){return Object(b.b)(e)}},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:(g=Object(u.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.record,e.next=3,Object(f.a)(r.id).then((function(){return n()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return g.apply(this,arguments)})},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:function(e,t){var n,r=e.record;return Object(p.a)({title:"编辑角色",fields:r,formSchema:k(),handleOk:(n=Object(u.a)(regeneratorRuntime.mark((function e(n,c){var a,o,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.description,o=n.title,i=n.accessIdsList,u={description:a,title:o,accessIdsList:i.toString()},e.next=4,Object(f.d)(r.id,u).then((function(){return t()}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})})}}]}],R=Object(r.defineComponent)({name:"SystemRole",components:{DynamicTable:d.DynamicTable},setup:function(){var e=Object(r.ref)(),t=Object(r.reactive)({tableLoading:!1,rowSelection:{onChange:function(e,n){t.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),n=Object(r.computed)((function(){return 0==t.rowSelection.selectedRowKeys.length}));return Object(i.a)(Object(i.a)({},Object(r.toRefs)(t)),{},{columns:x,tableRef:e,isDisabled:n,getAdminRole:f.b,printTable:function(){var t,n=null===(t=e.value)||void 0===t?void 0:t.$el.querySelector(".ant-table-content").cloneNode(!0);n.setAttribute("id","printContainer"),document.body.append(n),window.addEventListener("afterprint",(function e(){n.remove(),window.removeEventListener("afterprint",e)})),document.execCommand("print")},addItem:function(){var t;Object(p.a)({title:"添加角色",formSchema:k(),handleOk:(t=Object(u.a)(regeneratorRuntime.mark((function t(n,r){var c,a,o,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.description,o=n.title,i=n.accessIdsList,u={description:a,title:o,accessIdsList:i.toString()},t.next=4,Object(f.e)(u);case 4:null===(c=e.value)||void 0===c||c.refreshTableData();case 5:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})})},deleteItems:function(){var n;s.a.confirm({title:"提示",icon:Object(r.createVNode)(l.a),content:"您确定要删除所有选中吗？",onOk:(n=Object(u.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(f.a)(t.rowSelection.selectedRowKeys.toString());case 2:null===(r=e.value)||void 0===r||r.refreshTableData(),t.rowSelection.selectedRowKeys=[];case 4:case"end":return n.stop()}}),n)}))),function(){return n.apply(this,arguments)})})}})}});n("6686"),R.render=function(e,t,n,i,u,s){var l=Object(r.resolveComponent)("a-button"),d=Object(r.resolveComponent)("dynamic-table"),f=Object(r.resolveDirective)("permission");return Object(r.openBlock)(),Object(r.createBlock)(d,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminRole,rowKey:"id","row-selection":e.rowSelection},{title:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createVNode)(l,{type:"primary",onClick:e.addItem},{default:Object(r.withCtx)((function(){return[c]})),_:1},8,["onClick"]),[[f,{action:"create",effect:"disabled"}]]),Object(r.createVNode)(l,{type:"primary",onClick:e.printTable},{default:Object(r.withCtx)((function(){return[a]})),_:1},8,["onClick"]),Object(r.withDirectives)(Object(r.createVNode)(l,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:Object(r.withCtx)((function(){return[o]})),_:1},8,["disabled","onClick"]),[[f,{action:"delete"}]])]})),_:1},8,["columns","get-list-func","row-selection"])},t.default=R},cff2:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n("a15b");var r,c=n("a526"),a=n("3bb8");function o(e){return c.a.request({url:[r.adminRoleAccess,e].join("/"),method:a.b.GET})}function i(e){return c.a.request({url:r.adminRole,method:a.b.GET,params:e})}function u(e){return c.a.request({url:[r.adminRole,e].join("/"),method:a.b.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}function s(e,t){return c.a.request({url:[r.adminRole,e].join("/"),method:a.b.PATCH,params:t},{isShowErrorMessage:!0,successMessageText:"修改成功"})}function l(e){return c.a.request({url:r.adminRole,method:a.b.POST,params:e},{isShowErrorMessage:!0,successMessageText:"创建成功"})}!function(e){e.adminRole="/admin/role",e.adminRoleAccess="/admin/role_access"}(r||(r={}))},ff4a:function(e,t,n){"use strict";var r=n("7a23"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},a=n("b3f0");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e,t.attrs);return r.createVNode(a.a,r.mergeProps(n,{icon:c}),null)};i.displayName="PlusSquareOutlined",i.inheritAttrs=!1,t.a=i}}]);